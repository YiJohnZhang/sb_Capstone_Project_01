# Database Documentation: 24.09.01_-_01.database_schema_documentation.pdf
# Database Figure: 24.09.01_-_01.database_schema_img.png


# capstone_project
# Questions
# Is it suggested to use UUID as a way to index information (see "Pets" model, "internal_uuid" attribute)?
# Can I skip the implementation of location services for a user in this project? I am thinking of using USPS's API for address validation.

users
-
id serial PK            # bigserial, then text next
first_name varchar(35)
last_name varchar(35)
email varchar(320)              #--https://www.rfc-editor.org/errata/eid1690; publicly viewable if is_lister
phone varchar(13) nullable      # client-side: nullable only if "is_lister = False"
encrypted_password text         # Unknown datatype
is_admin boolean                # or combine "is_admin" and "is_moderator" to "is_elevated" and to char(1) and make it nullable
    # https://www.postgresql.org/message-id/11576.1041629241%40sss.pgh.pa.us
is_moderator boolean
is_lister boolean
is_public boolean               # if this can be viewed publicly and searchable
description varchar(1000)       # 1000 character description
social_links json nullable      # JSON type for social media & others
custom_css json nullable        # stretch, maybe a custom background and theme
address_line_1 text nullable    # client-side: nullable only if "is_lister = False"
address_line_2 text nullable    # client-side: nullable only if "is_lister = False"
address_city text
address_state text
address_line_zip varchar(20) nullable  # Canucks have alpha characters in their Zip Code: https://kb.bullseyelocations.com/article/93-postal-code-formats
    # automatically parse out hyphens
address_country text
# Index all large city users & pet adoption organizations

pet_database    # only for is_lister; JOIN between pets and users. this is INDEXed
-
pointer serial PK                   # bigserial then text next
agency_user_id int FK -0< users.id  # FK to users.id
pet_id int FK - pets.id             # FK to pets.id

pets
-
id text PK  # generate a random one to be publicly viewable
internal_uuid uuid   # NOT NULL DEFAULT
    # first 8 positions: user_id? 36^8 => 2.8E12 organizations (overkill)
    # next 4 positions: something, maybe 
    # next 4 positions: something, maybe color or breed
    # next 12 positions: pet_identifier => 36^12 = 4.7E18 pets/organization (overkill)
    # maybe break it into 6,1,1-2,1,1,1-1,1,1,1-1,1,1,1-4,8
    # contain information about the pet in the UUID. this can make searching easier
        # i.e., what if I just substring a portion of the UUID and then do string matching?
    # generator function? increment from 0 to z; then increment the next
# lots of attributes:
pet_name varchar(35)
description varchar(1500)
photo_uploaded varchar(???) # do processing to rename the image
publish_time timestamp      # GMT
gender boolean              # T (1) for male, F (0) for female
sterilized boolean          # spayed/neutered
estimated_age smallint
age_certainty boolean       # T (1) for exact, F (0) for estimate
age_units boolean           # T (1) for years, F (0) for months
weight smallint             
weight_units boolean        # T (1) for kg, F (0) for lb
pet_classification varchar(10)  # "pet_type" publicly: cat, dog, bird, fish, anything longer than 10 char?
    # cat: felidae family, dog: canidae family, birds: aves class, boned fish: actinopterygii, axolotl/frogs: amphibia
coat text(10) nullable              # only appears if cat/dog
breed_unknown boolean nullable      # only appears if cat/dog
breed_primary text(50) nullable     # only appears if breed_unknown = True
breed_secondary text(50) nullable   # only appears if breed_unknown = True
breed_mixed text(50) nullable       # only appears if breed_unknown = True
color_primary ??? FK                # maybe FK this or integrate it into the UUID
color_secondary ??? nullable
color_tertiary ??? nullable
house_trained boolean               # category only appears if searching cat/dog/bird; default False
declawed boolean nullable           # category only appears if searching cat/dog during search, default False
special_needs boolean nullable      # Null = Unavailable; T,F, self-explanatory
medical_records_uptodate boolean nullable   # Null = Unavailable; T,F, self-explanatory
environment_children boolean nullable
environment_dogs boolean nullable
environment_cats boolean nullable

breeds              # look-up table for quick matching
-
id

colors              # look-up table for quick matching
-
id



# chatlog relation: a stretch but for users to communicate with another. also a means for the system to communicate with users
# complaints relation: a stretch but a system to forward any complaints, i.e. animal abuse or unfit for habitation to relevant law enforcement agencies or animal advocacy agencies
    # accessible to moderator and admin

# location-side
# potentially use an API for validation?
    # https://www.usps.com/business/web-tools-apis/address-information-api.htm#_Toc39492052
    # https://www.smarty.com/articles/using-usps-apis-in-python
    # https://www.loqate.com/
city
-
id bigserial PK                         # consider TEXT
county_name varchar(100)
zipcode_id bigint FK >-< zipcode.id     # FK

zipcode
-
id bigserial PK                         # consider TEXT
zipcode varchar(20)                     # Canucks have alpha characters in their Zip Code: https://kb.bullseyelocations.com/article/93-postal-code-formats
state_id int FK >- state.id             # FK

state
-
id serial PK
state_name varchar(100)
country_id smallint FK >- country.id    # FK

country
-
id smallserial PK
country_name varchar(100)
currency_code varchar(20)               # potentially, if going international & a way to support this service

# language table?
